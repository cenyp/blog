# antdv 表单校验
原理
``` js
// 子组件会监听 name 执行 addField 函数在 a-form 的 fields 字段增加值
const fieldName = computed(() => props.name || props.prop);
watch(
      fieldName,
      val => {
        if (val) {
          if (!registered) {
            registered = true;
            formContext.addField(eventKey, {
              fieldValue,
              fieldId,
              fieldName,
              resetField,
              clearValidate,
              namePath,
              validateRules,
              rules: rulesRef,
            });
          }
        } else {
          registered = false;
          formContext.removeField(eventKey);
        }
      },
      { immediate: true },
    );

// a-form
// validateFields 会遍历 fields 做校验
```

所以，有以下注意事项
1. 使用 v-show 切换 a-form-item 时，要注意校验问题，组件虽然没有显示，依然会校验。建议谨慎使用
2. resetFields 也是会遍历 fields 还原校验和绑定值，可以使用 `<a-form-item name="timeType" v-show="false"></a-form-item>` 的写法处理需要重置的值

# a-modal 使用 :deep 不生效
a-modal 标签下设置 class 类名 myModal，`.myModal :deep(.xxx){ ... }` 这样子写是不生效的；发现 .myModal 所在的 div 标签并没有 data-v-xxxxx 的自定义属性，要再套一层 `.myModal :deep(.xxx){ ... }`。

antdv 是 jsx 写的没有用 scoped，在使用时写在同节点上，无法选中





